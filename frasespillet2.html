// Enkel versjon av rakettdrivstoff-spillet i HTML + Canvas + JavaScript
// Spilleren svarer pÃ¥ spÃ¸rsmÃ¥l. Riktige svar gir drivstoff, gale svar trekker fra.
// Etter X spÃ¸rsmÃ¥l: vinn (hvis nok drivstoff) eller tap.

// Lager et canvas-element (tegneflate) og legger det til pÃ¥ nettsiden
dconst canvas = document.createElement('canvas');
canvas.width = 800;
canvas.height = 600;
document.body.appendChild(canvas);
const ctx = canvas.getContext('2d'); // Henter "tegnekonteksten" vi bruker til Ã¥ tegne pÃ¥ canvas

// SpÃ¸rsmÃ¥lene i spillet â€“ hvert har spÃ¸rsmÃ¥lstekst, svaralternativer og riktig svar (index)
let questions = [
  { question: 'Hva heter hovedstaden i Norge?', options: ['Oslo', 'Bergen', 'Trondheim'], answer: 0 },
  { question: 'Hva er 5 + 3?', options: ['6', '8', '10'], answer: 1 },
  { question: 'Hvilken farge fÃ¥r du av blÃ¥ og gul?', options: ['GrÃ¸nn', 'Lilla', 'Oransje'], answer: 0 },
  // Legg til flere spÃ¸rsmÃ¥l her
];

let currentQuestion = 0;      // Hvilket spÃ¸rsmÃ¥l vi er pÃ¥ nÃ¥
let fuel = 50;                // StartnivÃ¥ pÃ¥ drivstoff
let fuelGain = 20;            // Hvor mye drivstoff du fÃ¥r for riktig svar
let fuelLoss = 15;            // Hvor mye du mister for feil svar
let fuelGoal = 70;            // Hvor mye drivstoff du mÃ¥ ha for Ã¥ vinne
let gameOver = false;         // Om spillet er ferdig eller ikke

// Tegner alt pÃ¥ skjermen â€“ spÃ¸rsmÃ¥l, alternativer og drivstoffstatus
function drawScreen() {
  ctx.clearRect(0, 0, canvas.width, canvas.height); // TÃ¸mmer skjermen fÃ¸r vi tegner pÃ¥ nytt

  ctx.fillStyle = 'black';
  ctx.font = '24px Arial';

  // Hvis spillet er ferdig, vis vinner/taper-melding
  if (gameOver) {
    if (fuel >= fuelGoal) {
      ctx.fillText('Du vant! Raketten flyr avgÃ¥rde! ğŸš€', 200, 250);
    } else {
      ctx.fillText('Du tapte! Ikke nok drivstoff...', 200, 250);
    }
    return; // Ikke tegn spÃ¸rsmÃ¥lene hvis spillet er over
  }

  // Henter gjeldende spÃ¸rsmÃ¥l og tegner det + svaralternativer
  let q = questions[currentQuestion];
  ctx.fillText(q.question, 50, 100);
  q.options.forEach((opt, i) => {
    ctx.fillText(`${i + 1}: ${opt}`, 70, 150 + i * 40);
  });

  // Tegner drivstoffstatus oppe i hÃ¸yre hjÃ¸rne
  ctx.fillText(`Drivstoff: ${fuel}`, 600, 50);
}

// Kalles nÃ¥r spilleren svarer. Sjekker om riktig og oppdaterer drivstoff.
function handleAnswer(index) {
  if (gameOver) return; // Ikke gjÃ¸r noe hvis spillet er over

  let q = questions[currentQuestion];

  if (index === q.answer) {
    fuel += fuelGain; // Riktig svar gir drivstoff
  } else {
    fuel -= fuelLoss; // Feil svar trekker fra
  }

  currentQuestion++; // GÃ¥ videre til neste spÃ¸rsmÃ¥l

  // Hvis vi er ferdig med alle spÃ¸rsmÃ¥lene, avslutt spillet
  if (currentQuestion >= questions.length) {
    gameOver = true;
  }

  drawScreen(); // Oppdater skjermen
}

// Lytter etter tastetrykk: '1', '2' eller '3' â€“ og kaller handleAnswer med riktig index
// Brukeren trykker 1 for fÃ¸rste alternativ, 2 for andre, osv.
document.addEventListener('keydown', (e) => {
  if (e.key >= '1' && e.key <= '3') {
    handleAnswer(parseInt(e.key) - 1);
  }
});

// Starter spillet ved Ã¥ tegne fÃ¸rste skjerm

drawScreen();
